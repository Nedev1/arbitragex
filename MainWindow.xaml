<Window x:Class="ArbitrageX.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="ArbitrageX" Height="820" Width="1200" Background="#0F1117" Foreground="#E6E6E6" WindowStartupLocation="CenterScreen">
  <Window.Resources>
    <Style TargetType="TextBlock">
      <Setter Property="FontFamily" Value="Segoe UI" />
    </Style>

    <Style TargetType="TextBox">
      <Setter Property="FontFamily" Value="Segoe UI" />
      <Setter Property="Background" Value="#151A24" />
      <Setter Property="Foreground" Value="#FFFFFF" />
      <Setter Property="BorderBrush" Value="#2A3242" />
      <Setter Property="BorderThickness" Value="1" />
      <Setter Property="Padding" Value="6,4" />
    </Style>

    <Style TargetType="ComboBoxItem">
      <Setter Property="Background" Value="#151A24" />
      <Setter Property="Foreground" Value="#FFFFFF" />
      <Setter Property="BorderBrush" Value="#151A24" />
    </Style>

    <Style TargetType="ComboBox">
      <Setter Property="FontFamily" Value="Segoe UI" />
      <Setter Property="Background" Value="#151A24" />
      <Setter Property="Foreground" Value="#FFFFFF" />
      <Setter Property="BorderBrush" Value="#2A3242" />
      <Setter Property="BorderThickness" Value="1" />
      <Setter Property="Padding" Value="6,4" />
      <Setter Property="ItemContainerStyle">
        <Setter.Value>
          <Style TargetType="ComboBoxItem">
            <Setter Property="Background" Value="#151A24" />
            <Setter Property="Foreground" Value="#FFFFFF" />
          </Style>
        </Setter.Value>
      </Setter>
      <Style.Resources>
        <SolidColorBrush x:Key="{x:Static SystemColors.WindowBrushKey}" Color="#151A24" />
        <SolidColorBrush x:Key="{x:Static SystemColors.WindowTextBrushKey}" Color="#FFFFFF" />
      </Style.Resources>
    </Style>

    <Style TargetType="Button">
      <Setter Property="FontFamily" Value="Segoe UI" />
      <Setter Property="Foreground" Value="#FFFFFF" />
      <Setter Property="Background" Value="#1D4ED8" />
      <Setter Property="BorderBrush" Value="#1D4ED8" />
      <Setter Property="BorderThickness" Value="0" />
      <Setter Property="Padding" Value="10,6" />
    </Style>

    <Style TargetType="ListBox">
      <Setter Property="FontFamily" Value="Consolas" />
      <Setter Property="Background" Value="#0B0F16" />
      <Setter Property="Foreground" Value="#E6E6E6" />
      <Setter Property="BorderBrush" Value="#2A3242" />
      <Setter Property="BorderThickness" Value="1" />
    </Style>
  </Window.Resources>

  <Grid Margin="16">
    <Grid.ColumnDefinitions>
      <ColumnDefinition Width="340" />
      <ColumnDefinition Width="*" />
    </Grid.ColumnDefinitions>

    <StackPanel Grid.Column="0" Margin="0,0,16,0">
      <TextBlock Text="ArbitrageX" FontSize="28" FontWeight="SemiBold" />
      <TextBlock Text="Latency Arbitrage Hub" Foreground="#8A93A6" Margin="0,2,0,16" />

      <Border Background="#121621" CornerRadius="8" Padding="12" Margin="0,0,0,12">
        <StackPanel>
          <TextBlock Text="Terminals" FontWeight="SemiBold" Margin="0,0,0,8" />
          <TextBlock Text="Source (Fast Broker)" Foreground="#8A93A6" />
          <ComboBox ItemsSource="{Binding Terminals}" SelectedItem="{Binding SelectedSource}" />
          <TextBlock Text="Target (Slow Broker)" Foreground="#8A93A6" Margin="0,8,0,0" />
          <ComboBox ItemsSource="{Binding Terminals}" SelectedItem="{Binding SelectedTarget}" />
        </StackPanel>
      </Border>

      <Border Background="#121621" CornerRadius="8" Padding="12" Margin="0,0,0,12">
        <StackPanel>
          <TextBlock Text="Symbol Mapping" FontWeight="SemiBold" Margin="0,0,0,8" />
          <TextBlock Text="Master Symbol" Foreground="#8A93A6" />
          <TextBox Text="{Binding MasterSymbol}" />
          <TextBlock Text="Slave Symbol" Foreground="#8A93A6" Margin="0,8,0,0" />
          <TextBox Text="{Binding SlaveSymbol}" />
        </StackPanel>
      </Border>

      <Border Background="#121621" CornerRadius="8" Padding="12" Margin="0,0,0,12">
        <StackPanel>
          <TextBlock Text="Fast Feed (Rithmic API)" FontWeight="SemiBold" Margin="0,0,0,8" />
          <CheckBox Content="Enable Rithmic Fast Feed" IsChecked="{Binding UseRithmic}" Foreground="#E6E6E6" />
        </StackPanel>
      </Border>

      <Border Background="#121621" CornerRadius="8" Padding="12" Margin="0,0,0,12">
        <StackPanel>
          <TextBlock Text="Settings" FontWeight="SemiBold" Margin="0,0,0,8" />
          <CheckBox Content="Low CPU Mode (Disable UI Logs)"
                    IsChecked="{Binding LowCpuMode}"
                    Foreground="#E6E6E6"
                    Margin="0,0,0,8" />
          <TextBlock Text="Lot Size" Foreground="#8A93A6" />
          <TextBox Text="{Binding LotSize}" />
          <TextBlock Text="Max Spread (USD)" Foreground="#8A93A6" Margin="0,8,0,0" />
          <TextBox Text="{Binding MaxSpread}" />
          <TextBlock Text="Trigger Threshold (USD)" Foreground="#8A93A6" Margin="0,8,0,0" />
          <TextBox Text="{Binding TriggerThreshold}" />
          <TextBlock Text="Hard Stop Loss (USD)" Foreground="#8A93A6" Margin="0,8,0,0" />
          <TextBox Text="{Binding HardStopLoss}" />
        </StackPanel>
      </Border>

      <StackPanel Orientation="Horizontal" HorizontalAlignment="Left" Margin="0,8,0,0">
        <Button Content="Start" Margin="0,0,8,0" Click="Start_Click" />
        <Button Content="Stop" Margin="0,0,8,0" Click="Stop_Click" />
        <Button Content="Kill Switch" Background="#DC2626" BorderBrush="#DC2626" Click="Kill_Click" />
      </StackPanel>
    </StackPanel>

    <Grid Grid.Column="1">
      <TabControl>
        <TabItem Header="Dashboard">
          <Grid>
            <Grid.RowDefinitions>
              <RowDefinition Height="Auto" />
              <RowDefinition Height="*" />
              <RowDefinition Height="220" />
            </Grid.RowDefinitions>

            <Border Background="#121621" CornerRadius="8" Padding="12" Margin="0,0,0,12">
              <Grid>
                <Grid.ColumnDefinitions>
                  <ColumnDefinition Width="*" />
                  <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <StackPanel>
                  <TextBlock Text="Status" FontWeight="SemiBold" Foreground="#E6E6E6" />
                  <StackPanel Orientation="Horizontal" Margin="0,6,0,0">
                    <TextBlock Text="Ticks/sec:" Foreground="#FFFFFF" />
                    <TextBlock Text="{Binding TicksPerSecond}" Margin="6,0,0,0" Foreground="#00FF00" />
                    <TextBlock Text="Gap:" Foreground="#FFFFFF" Margin="16,0,0,0" />
                    <TextBlock Text="{Binding GapMs}" Margin="6,0,0,0" Foreground="#00FF00" />
                  </StackPanel>
                  <StackPanel Orientation="Horizontal" Margin="0,6,0,0">
                    <TextBlock Text="Last Fill:" Foreground="#FFFFFF" />
                    <TextBlock Text="{Binding LastFill}" Margin="6,0,0,0" TextTrimming="CharacterEllipsis" Foreground="#00FF00" />
                  </StackPanel>
                  <StackPanel Orientation="Horizontal" Margin="0,6,0,0">
                    <TextBlock Text="Engine Status:" Foreground="#FFFFFF" />
                    <TextBlock Text="{Binding StatusText}" Margin="6,0,0,0" TextTrimming="CharacterEllipsis" Foreground="#00FF00" />
                  </StackPanel>
                </StackPanel>

                <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center">
                  <Ellipse Width="16" Height="16" Fill="{Binding TrafficBrush}" Stroke="#0B0F16" StrokeThickness="1" Margin="0,0,8,0" />
                  <TextBlock Text="{Binding TrafficText}" Foreground="#E6E6E6" />
                </StackPanel>
              </Grid>
            </Border>

            <Border Background="#121621" CornerRadius="8" Padding="12" Grid.Row="1" Margin="0,0,0,12">
              <StackPanel>
                <TextBlock Text="Gap / Delta (ms)" FontWeight="SemiBold" />
                <TextBlock Text="Graph disabled for maximum execution speed." Foreground="#8A93A6" Margin="0,8,0,0" />
              </StackPanel>
            </Border>

            <Border Background="#121621" CornerRadius="8" Padding="12" Grid.Row="2">
              <Grid>
                <Grid.RowDefinitions>
                  <RowDefinition Height="Auto" />
                  <RowDefinition Height="*" />
                </Grid.RowDefinitions>
                <TextBlock Text="Debug Log" FontWeight="SemiBold" />
                <ListBox x:Name="DebugLog" Grid.Row="1" ItemsSource="{Binding DebugLog}" Margin="0,8,0,0" />
              </Grid>
            </Border>
          </Grid>
        </TabItem>

        <TabItem Header="Analysis">
          <Grid Margin="12">
            <Grid.RowDefinitions>
              <RowDefinition Height="Auto" />
              <RowDefinition Height="Auto" />
              <RowDefinition Height="Auto" />
              <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
              <Button Content="Analyze Market" Click="Analyze_Click" />
              <TextBlock Text=" " Width="12" />
              <TextBlock Text="Duration (Minutes):" Foreground="#8A93A6" VerticalAlignment="Center" />
              <TextBox Text="{Binding AnalysisDurationMinutes}" Width="80" Margin="6,0,0,0" />
            </StackPanel>

            <TextBlock Grid.Row="1" Text="{Binding AnalysisStatus}" Foreground="#8A93A6" />
            <TextBlock Grid.Row="2" Text="{Binding AnalysisProgress}" Foreground="#8A93A6" />

            <Border Grid.Row="3" Background="#121621" CornerRadius="8" Padding="12">
              <StackPanel>
                <TextBlock Text="Result" FontWeight="SemiBold" Margin="0,0,0,8" />
                <TextBlock Text="{Binding AnalysisResult}" TextWrapping="Wrap" />
              </StackPanel>
            </Border>
          </Grid>
        </TabItem>
      </TabControl>
    </Grid>
  </Grid>
</Window>
